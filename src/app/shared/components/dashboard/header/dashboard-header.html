<header class="dashboard-header">
  <div class="header-container">
    <!-- Left side - Logo/Brand -->
    <div class="header-left">
      <div class="logo">
        <h1 class="logo-text">PTL</h1>
      </div>
    </div>

    <!-- Center - Search (optional) -->
    <div class="header-center">
      <!-- Space for search bar or breadcrumbs if needed -->
    </div>

    <!-- Right side - Theme toggle and User menu -->
    <div class="header-right">
      <!-- Theme Toggle -->
      <app-theme-toggle></app-theme-toggle>

      <div class="user-menu" [class.open]="isMenuOpen()">
        <p-button (click)="toggleUserMenu()" [text]="true" styleClass="user-avatar-btn !p-0 !border-0 !bg-transparent"
          aria-label="User menu">
          <div class="user-avatar">
            @if (user()?.avatar) {
            <img [src]="user()!.avatar" [alt]="user()!.name" class="avatar-image">
            } @else {
            <div class="avatar-initials">
              {{ user()?.name?.charAt(0) || 'U' }}
            </div>
            }
          </div>
          <div class="user-info">
            <span class="user-name">{{ user()?.name || 'Usuário' }}</span>
            <span class="user-role">{{ user()?.role || 'user' }}</span>
          </div>
          <div class="dropdown-arrow"></div>
        </p-button>

        <!-- Dropdown menu -->
        @if (isMenuOpen()) {
        <div class="user-dropdown">
          <p-button (click)="onProfile()" [text]="true"
            styleClass="dropdown-item !justify-start !text-left !w-full !p-2 !text-surface-700 dark:!text-surface-200 hover:!bg-surface-100 dark:hover:!bg-surface-800">
            <lucide-icon [img]="User" size="16" class="text-surface-600 dark:text-surface-300"></lucide-icon>
            <span class="ml-2">Perfil</span>
          </p-button>
          <p-button (click)="onSettings()" [text]="true"
            styleClass="dropdown-item !justify-start !text-left !w-full !p-2 !text-surface-700 dark:!text-surface-200 hover:!bg-surface-100 dark:hover:!bg-surface-800">
            <lucide-icon [img]="Settings" size="16" class="text-surface-600 dark:text-surface-300"></lucide-icon>
            <span class="ml-2">Configurações</span>
          </p-button>
          <hr class="dropdown-divider">
          <p-button (click)="onLogout()" [text]="true"
            styleClass="dropdown-item logout !justify-start !text-left !w-full !p-2 !text-red-600 dark:!text-red-400 hover:!bg-red-50 dark:hover:!bg-red-900/20">
            <lucide-icon [img]="LogOut" size="16" class="text-red-500 dark:text-red-400"></lucide-icon>
            <span class="ml-2">Sair</span>
          </p-button>
        </div>
        }
      </div>
    </div>
  </div>

  <!-- Overlay to close menu when clicking outside -->
  @if (isMenuOpen()) {
  <div class="menu-overlay" (click)="isMenuOpen.set(false)"></div>
  }
</header>